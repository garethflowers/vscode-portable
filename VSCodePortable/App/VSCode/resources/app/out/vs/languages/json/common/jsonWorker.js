/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/languages/json/common/features/jsonFormatter",["require","exports","vs/base/common/json"],function(e,t,n){function r(e,t,r){function s(){return e.getEOL()+i(d,c+f)}function a(){var e=h.scan();for(m=!1;e===n.SyntaxKind.Trivia||e===n.SyntaxKind.LineBreakTrivia;)m=m||e===n.SyntaxKind.LineBreakTrivia,e=h.scan();return e}function l(t,n){e.getValueInRange(n)!==t&&g.push({range:n,text:t})}var c,u,p;t?(t={startLineNumber:t.startLineNumber,startColumn:1,endLineNumber:t.endLineNumber,endColumn:e.getLineMaxColumn(t.endLineNumber)},c=o(e.getLineContent(t.startLineNumber),r),u=e.getValueInRange(t),p=e.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn})):(t=e.getFullModelRange(),c=0,u=e.getValue(),p=0);var d,m=!1,f=0;d=r.insertSpaces?i(" ",r.tabSize):"	";var h=n.createScanner(u,!1),g=[],y=a();if(y!==n.SyntaxKind.EOF){var v=e.getPositionFromOffset(h.getTokenOffset()+p),b=i(d,c);l(b,{startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:v.lineNumber,endColumn:v.column})}for(;y!==n.SyntaxKind.EOF;){for(var S=e.getPositionFromOffset(h.getTokenOffset()+h.getTokenLength()+p),z=a();!m&&(z===n.SyntaxKind.LineCommentTrivia||z===n.SyntaxKind.BlockCommentTrivia);){var j=e.getPositionFromOffset(h.getTokenOffset()+p);l(" ",{startLineNumber:S.lineNumber,startColumn:S.column,endLineNumber:j.lineNumber,endColumn:j.column}),S=e.getPositionFromOffset(h.getTokenOffset()+h.getTokenLength()+p),z=a()}var O="";if(z===n.SyntaxKind.CloseBraceToken)y!==n.SyntaxKind.OpenBraceToken&&(f--,O=s());else if(z===n.SyntaxKind.CloseBracketToken)y!==n.SyntaxKind.OpenBracketToken&&(f--,O=s());else{switch(y){case n.SyntaxKind.OpenBracketToken:case n.SyntaxKind.OpenBraceToken:f++,O=s();break;case n.SyntaxKind.CommaToken:case n.SyntaxKind.LineCommentTrivia:O=s();break;case n.SyntaxKind.BlockCommentTrivia:O=m?s():" ";break;case n.SyntaxKind.ColonToken:O=" ";break;case n.SyntaxKind.NullKeyword:case n.SyntaxKind.TrueKeyword:case n.SyntaxKind.FalseKeyword:case n.SyntaxKind.NumericLiteral:(z===n.SyntaxKind.NullKeyword||z===n.SyntaxKind.FalseKeyword||z===n.SyntaxKind.NumericLiteral)&&(O=" ")}!m||z!==n.SyntaxKind.LineCommentTrivia&&z!==n.SyntaxKind.BlockCommentTrivia||(O=s())}var k=e.getPositionFromOffset(h.getTokenOffset()+p);l(O,{startLineNumber:S.lineNumber,startColumn:S.column,endLineNumber:k.lineNumber,endColumn:k.column}),y=z}return g}function i(e,t){for(var n="",r=0;t>r;r++)n+=e;return n}function o(e,t){for(var n=0,r=0,i=t.tabSize||4;n<e.length;){var o=e.charAt(n);if(" "===o)r++;else{if("	"!==o)break;r+=i}n++}return Math.floor(r/i)}t.format=r}),define("vs/nls!vs/languages/json/common/contributions/bowerJSONContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/bowerJSONContribution",t)}),define("vs/nls!vs/languages/json/common/contributions/globPatternContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/globPatternContribution",t)}),define("vs/nls!vs/languages/json/common/contributions/packageJSONContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/packageJSONContribution",t)}),define("vs/nls!vs/languages/json/common/contributions/projectJSONContribution",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/contributions/projectJSONContribution",t)}),define("vs/nls!vs/languages/json/common/jsonIntellisense",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/jsonIntellisense",t)}),define("vs/nls!vs/languages/json/common/jsonSchemaService",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/jsonSchemaService",t)}),define("vs/nls!vs/languages/json/common/parser/jsonParser",["vs/nls","vs/nls!vs/languages/json/common/jsonWorker"],function(e,t){return e.create("vs/languages/json/common/parser/jsonParser",t)});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define("vs/languages/json/common/parser/jsonParser",["require","exports","vs/nls!vs/languages/json/common/parser/jsonParser","vs/base/common/arrays","vs/base/common/types","vs/base/common/json"],function(e,t,n,r,i,o){var s=function(){function e(e,t,n,r,i){this.type=t,this.name=n,this.start=r,this.end=i,this.parent=e}return e.prototype.getPath=function(){var e=[];return this.parent?(e=this.parent.getPath(),this.name&&e.push(this.name),e):e},e.prototype.getChildNodes=function(){return[]},e.prototype.getValue=function(){},e.prototype.contains=function(e,t){return void 0===t&&(t=!1),e>=this.start&&e<this.end||t&&e===this.end},e.prototype.visit=function(e){return e(this)},e.prototype.getNodeFromOffset=function(e){var t=function(n){if(e>=n.start&&e<n.end){for(var r=n.getChildNodes(),i=0;i<r.length&&r[i].start<=e;i++){var o=t(r[i]);if(o)return o}return n}return null};return t(this)},e.prototype.getNodeFromOffsetEndInclusive=function(e){var t=function(n){if(e>=n.start&&e<=n.end){for(var r=n.getChildNodes(),i=0;i<r.length&&r[i].start<=e;i++){var o=t(r[i]);if(o)return o}return n}return null};return t(this)},e.prototype.validate=function(e,t,i,o){var s=this;if(void 0===o&&(o=-1),-1===o||this.contains(o)){if(Array.isArray(e.type)?r.contains(e.type,this.type)===!1?t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(0,null,e.type.join())}):e.type.length>0&&(t.typeMatch=!0):e.type&&(this.type!==e.type?t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(1,null,e.type)}):t.typeMatch=!0),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){s.validate(e,t,i,o)}),e.not){var a=new h,l=[];this.validate(e.not,a,l,o),a.hasErrors()||t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(2,null)}),i&&l.forEach(function(e){e.inverted=!e.inverted,i.push(e)})}var c=function(e,r){var o=[],a=null;return e.forEach(function(e){var t=new h,n=[];if(s.validate(e,t,n),t.hasErrors()||o.push(e),a)if(r||t.hasErrors()||a.validationResult.hasErrors()){var i=t.compare(a.validationResult);i>0?a={schema:e,validationResult:t,matchingSchemas:n}:0===i&&a.matchingSchemas.push.apply(a.matchingSchemas,n)}else a.matchingSchemas.push.apply(a.matchingSchemas,n),a.validationResult.propertiesMatches+=t.propertiesMatches,a.validationResult.propertiesValueMatches+=t.propertiesValueMatches;else a={schema:e,validationResult:t,matchingSchemas:n}}),o.length>1&&r&&t.warnings.push({location:{start:s.start,end:s.start+1},message:n.localize(3,null)}),null!==a&&(t.merge(a.validationResult),t.propertiesMatches+=a.validationResult.propertiesMatches,t.propertiesValueMatches+=a.validationResult.propertiesValueMatches,i&&i.push.apply(i,a.matchingSchemas)),o.length};Array.isArray(e.anyOf)&&c(e.anyOf,!1),Array.isArray(e.oneOf)&&c(e.oneOf,!0),Array.isArray(e["enum"])&&r.contains(e["enum"],this.getValue())===!1&&t.warnings.push({location:{start:this.start,end:this.end},message:n.localize(4,null,JSON.stringify(e["enum"]))}),null!==i&&i.push({node:this,schema:e})}},e}();t.ASTNode=s;var a=function(e){function t(t,n,r,i){e.call(this,t,"null",n,r,i)}return __extends(t,e),t.prototype.getValue=function(){return null},t}(s);t.NullASTNode=a;var l=function(e){function t(t,n,r,i,o){e.call(this,t,"boolean",n,i,o),this.value=r}return __extends(t,e),t.prototype.getValue=function(){return this.value},t}(s);t.BooleanASTNode=l;var c=function(e){function t(t,n,r,i){e.call(this,t,"array",n,r,i),this.items=[]}return __extends(t,e),t.prototype.getChildNodes=function(){return this.items},t.prototype.getValue=function(){return this.items.map(function(e){return e.getValue()})},t.prototype.addItem=function(e){return e?(this.items.push(e),!0):!1},t.prototype.visit=function(e){for(var t=e(this),n=0;n<this.items.length&&t;n++)t=this.items[n].visit(e);return t},t.prototype.validate=function(t,r,i,o){var s=this;if(void 0===o&&(o=-1),-1===o||this.contains(o)){if(e.prototype.validate.call(this,t,r,i,o),Array.isArray(t.items)){var a=t.items;a.forEach(function(e,n){var a=new h,l=s.items[n];l?(l.validate(e,a,i,o),r.mergePropertyMatch(a)):s.items.length>=t.items.length&&r.propertiesValueMatches++}),t.additionalItems===!1&&this.items.length>a.length?r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(5,null,a.length)}):this.items.length>=t.items.length&&(r.propertiesValueMatches+=this.items.length-t.items.length)}else t.items&&this.items.forEach(function(e){var n=new h;e.validate(t.items,n,i,o),r.mergePropertyMatch(n)});if(t.minItems&&this.items.length<t.minItems&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(6,null,t.minItems)}),t.maxItems&&this.items.length>t.maxItems&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(7,null,t.minItems)}),t.uniqueItems===!0){var l=this.items.map(function(e){return e.getValue()}),c=l.some(function(e,t){return t!==l.lastIndexOf(e)});c&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(8,null)})}}},t}(s);t.ArrayASTNode=c;var u=function(e){function t(t,n,r,i){e.call(this,t,"number",n,r,i),this.isInteger=!0,this.value=Number.NaN}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,o,s,a){if(void 0===a&&(a=-1),-1===a||this.contains(a)){var l=!1;("integer"===t.type||Array.isArray(t.type)&&r.contains(t.type,"integer"))&&(l=!0),l&&this.isInteger===!0&&(this.type="integer"),e.prototype.validate.call(this,t,o,s,a),this.type="number";var c=this.getValue();i.isNumber(t.multipleOf)&&c%t.multipleOf!==0&&o.warnings.push({location:{start:this.start,end:this.end},message:n.localize(9,null,t.multipleOf)}),i.isUndefined(t.minimum)||(t.exclusiveMinimum&&c<=t.minimum&&o.warnings.push({location:{start:this.start,end:this.end},message:n.localize(10,null,t.minimum)}),!t.exclusiveMinimum&&c<t.minimum&&o.warnings.push({location:{start:this.start,end:this.end},message:n.localize(11,null,t.minimum)})),i.isUndefined(t.maximum)||(t.exclusiveMaximum&&c>=t.maximum&&o.warnings.push({location:{start:this.start,end:this.end},message:n.localize(12,null,t.maximum)}),!t.exclusiveMaximum&&c>t.maximum&&o.warnings.push({location:{start:this.start,end:this.end},message:n.localize(13,null,t.maximum)}))}},t}(s);t.NumberASTNode=u;var p=function(e){function t(t,n,r,i,o){this.isKey=r,this.value="",e.call(this,t,"string",n,i,o)}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,r,i,o){if(void 0===o&&(o=-1),(-1===o||this.contains(o))&&(e.prototype.validate.call(this,t,r,i,o),t.minLength&&this.value.length<t.minLength&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(14,null,t.minLength)}),t.maxLength&&this.value.length>t.maxLength&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(15,null,t.maxLength)}),t.pattern)){var s=new RegExp(t.pattern);s.test(this.value)||r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(16,null,t.pattern)})}},t}(s);t.StringASTNode=p;var d=function(e){function t(t,n){e.call(this,t,"property",null,n.start),this.key=n,n.parent=this,n.name=n.value,this.colonOffset=-1}return __extends(t,e),t.prototype.getChildNodes=function(){return this.value?[this.key,this.value]:[this.key]},t.prototype.setValue=function(e){return this.value=e,null!==e},t.prototype.visit=function(e){return e(this)&&this.key.visit(e)&&this.value&&this.value.visit(e)},t.prototype.validate=function(e,t,n,r){void 0===r&&(r=-1),(-1===r||this.contains(r))&&this.value&&this.value.validate(e,t,n,r)},t}(s);t.PropertyASTNode=d;var m=function(e){function t(t,n,r,i){e.call(this,t,"object",n,r,i),this.properties=[]}return __extends(t,e),t.prototype.getChildNodes=function(){return this.properties},t.prototype.addProperty=function(e){return e?(this.properties.push(e),!0):!1},t.prototype.getFirstProperty=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].key.value===e)return this.properties[t];return null},t.prototype.getKeyList=function(){return this.properties.map(function(e){return e.key.getValue()})},t.prototype.getValue=function(){var e={};return this.properties.forEach(function(t){var n=t.value&&t.value.getValue();n&&(e[t.key.getValue()]=n)}),e},t.prototype.visit=function(e){for(var t=e(this),n=0;n<this.properties.length&&t;n++)t=this.properties[n].visit(e);return t},t.prototype.validate=function(t,r,o,s){var a=this;if(void 0===s&&(s=-1),-1===s||this.contains(s)){e.prototype.validate.call(this,t,r,o,s);var l={},c=[];this.properties.forEach(function(e){var t=e.key.value;l[t]=e.value,c.push(t)}),Array.isArray(t.required)&&t.required.forEach(function(e){if(!l[e]){var t=a.parent&&a.parent&&a.parent.key,i=t?{start:t.start,end:t.end}:{start:a.start,end:a.start+1};r.warnings.push({location:i,message:n.localize(17,null,e)})}});var u=function(e){for(var t=c.indexOf(e);t>=0;)c.splice(t,1),t=c.indexOf(e)};t.properties&&Object.keys(t.properties).forEach(function(e){u(e);var n=t.properties[e],i=l[e];if(i){var a=new h;i.validate(n,a,o,s),r.mergePropertyMatch(a)}}),t.patternProperties&&Object.keys(t.patternProperties).forEach(function(e){var n=new RegExp(e);c.slice(0).forEach(function(i){if(n.test(i)){u(i);var a=l[i];if(a){var c=new h;a.validate(t.patternProperties[e],c,o,s),r.mergePropertyMatch(c)}}})}),i.isObject(t.additionalProperties)?c.forEach(function(e){var n=l[e];if(n){var i=new h;n.validate(t.additionalProperties,i,o,s),r.mergePropertyMatch(i)}}):t.additionalProperties===!1&&c.length>0&&c.forEach(function(e){var t=l[e];if(t){var i=t.parent;r.warnings.push({location:{start:i.key.start,end:i.key.end},message:n.localize(18,null,e)})}}),t.maxProperties&&this.properties.length>t.maxProperties&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(19,null,t.maxProperties)}),t.minProperties&&this.properties.length<t.minProperties&&r.warnings.push({location:{start:this.start,end:this.end},message:n.localize(20,null,t.minProperties)}),i.isObject(t.dependencies)&&Object.keys(t.dependencies).forEach(function(e){var c=l[e];if(c)if(Array.isArray(t.dependencies[e])){var u=t.dependencies[e];u.forEach(function(t){l[t]?r.propertiesValueMatches++:r.warnings.push({location:{start:a.start,end:a.end},message:n.localize(21,null,t,e)})})}else if(i.isObject(t.dependencies[e])){var p=t.dependencies[e],d=new h;a.validate(p,d,o,s),r.mergePropertyMatch(d)}})}},t}(s);t.ObjectASTNode=m;var f=function(){function e(){this.ignoreDanglingComma=!1}return e}();t.JSONDocumentConfig=f;var h=function(){function e(){this.errors=[],this.warnings=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.typeMatch=!1}return e.prototype.hasErrors=function(){return!!this.errors.length||!!this.warnings.length},e.prototype.mergeAll=function(e){var t=this;e.forEach(function(e){t.merge(e)})},e.prototype.merge=function(e){this.errors=this.errors.concat(e.errors),this.warnings=this.warnings.concat(e.warnings)},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,e.hasErrors()||this.propertiesValueMatches++},e.prototype.compare=function(e){var t=this.hasErrors();return t!==e.hasErrors()?t?-1:1:this.typeMatch!==e.typeMatch?e.typeMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();t.ValidationResult=h;var g=function(){function e(e){this.config=e,this.validationResult=new h}return Object.defineProperty(e.prototype,"errors",{get:function(){return this.validationResult.errors},set:function(e){this.validationResult.errors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warnings",{get:function(){return this.validationResult.warnings},set:function(e){this.validationResult.warnings=e},enumerable:!0,configurable:!0}),e.prototype.getNodeFromOffset=function(e){return this.root&&this.root.getNodeFromOffset(e)},e.prototype.getNodeFromOffsetEndInclusive=function(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)},e.prototype.visit=function(e){this.root&&this.root.visit(e)},e.prototype.validate=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=-1),this.root&&this.root.validate(e,this.validationResult,t,n)},e}();t.JSONDocument=g;var y=function(){function e(){}return e.prototype.parse=function(e,t){function r(e){return x.getToken()===e?(x.scan(),!0):!1}function i(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),0===k.errors.length||k.errors[0].location.start!==x.getTokenOffset()){var i={message:e,location:{start:x.getTokenOffset(),end:x.getTokenOffset()+x.getTokenLength()}};k.errors.push(i)}if(t&&h(t,!1),n.length+r.length>0)for(var s=x.getToken();s!==o.SyntaxKind.EOF;){if(-1!==n.indexOf(s)){x.scan();break}if(-1!==r.indexOf(s))break;s=x.scan()}return t}function s(){switch(x.getTokenError()){case o.ScanError.InvalidUnicode:return i(n.localize(22,null)),!0;case o.ScanError.InvalidEscapeCharacter:return i(n.localize(23,null)),!0;case o.ScanError.UnexpectedEndOfNumber:return i(n.localize(24,null)),!0;case o.ScanError.UnexpectedEndOfComment:return i(n.localize(25,null)),!0;case o.ScanError.UnexpectedEndOfString:return i(n.localize(26,null)),!0}return!1}function h(e,t){return e.end=x.getTokenOffset()+x.getTokenLength(),t&&x.scan(),e}function y(e,t){if(x.getToken()!==o.SyntaxKind.OpenBracketToken)return null;var s=new c(e,t,x.getTokenOffset());x.scan();var a=0;if(s.addItem(O(s,""+a++)))for(;r(o.SyntaxKind.CommaToken);)s.addItem(O(s,""+a++))||k.config.ignoreDanglingComma||i(n.localize(27,null));return x.getToken()!==o.SyntaxKind.CloseBracketToken?i(n.localize(28,null),s):h(s,!0)}function v(e,t){var r=S(null,null,!0);if(!r){if(x.getToken()===o.SyntaxKind.Unknown){var s=x.getTokenValue();s.length>0&&("'"===s.charAt(0)||o.isLetter(s.charAt(0).charCodeAt(0)))&&i(n.localize(29,null))}return null}var a=new d(e,r);return t[r.value]&&k.warnings.push({location:{start:a.key.start,end:a.key.end},message:n.localize(30,null)}),t[r.value]=!0,x.getToken()!==o.SyntaxKind.ColonToken?i(n.localize(31,null),a,[],[o.SyntaxKind.CloseBraceToken,o.SyntaxKind.CommaToken]):(a.colonOffset=x.getTokenOffset(),x.scan(),a.setValue(O(a,a.key.getValue()))?(a.end=a.value.end,a):i(n.localize(32,null),a,[],[o.SyntaxKind.CloseBraceToken,o.SyntaxKind.CommaToken]))}function b(e,t){if(x.getToken()!==o.SyntaxKind.OpenBraceToken)return null;var s=new m(e,t,x.getTokenOffset());x.scan();var a={};if(s.addProperty(v(s,a)))for(;r(o.SyntaxKind.CommaToken);)s.addProperty(v(s,a))||k.config.ignoreDanglingComma||i(n.localize(33,null));return x.getToken()!==o.SyntaxKind.CloseBraceToken?i(n.localize(34,null),s):h(s,!0)}function S(e,t,n){if(x.getToken()!==o.SyntaxKind.StringLiteral)return null;var r=new p(e,t,n,x.getTokenOffset());return r.value=x.getTokenValue(),s(),h(r,!0)}function z(e,t){if(x.getToken()!==o.SyntaxKind.NumericLiteral)return null;var r=new u(e,t,x.getTokenOffset());if(!s()){var a=x.getTokenValue();try{var l=JSON.parse(a);if("number"!=typeof l)return i(n.localize(35,null),r);r.value=l}catch(c){return i(n.localize(36,null),r)}r.isInteger=-1===a.indexOf(".")}return h(r,!0)}function j(e,t){var n;switch(x.getToken()){case o.SyntaxKind.NullKeyword:n=new a(e,t,x.getTokenOffset());break;case o.SyntaxKind.TrueKeyword:n=new l(e,t,!0,x.getTokenOffset());break;case o.SyntaxKind.FalseKeyword:n=new l(e,t,!1,x.getTokenOffset());break;default:return null}return h(n,!0)}function O(e,t){return y(e,t)||b(e,t)||S(e,t,!1)||z(e,t)||j(e,t)}void 0===t&&(t=new f);var k=new g(t),x=o.createScanner(e,!0);return x.scan(),k.root=O(null,"root"),k.root?x.getToken()!==o.SyntaxKind.EOF&&i(n.localize(38,null)):i(n.localize(37,null)),k},e}();t.JSONParser=y}),define("vs/languages/json/common/jsonIntellisense",["require","exports","./parser/jsonParser","vs/base/common/types","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/jsonIntellisense","vs/base/common/errors"],function(e,t,n,r,i,o,s){var a=function(){function e(e,t,n){this.schemaService=e,this.requestService=t,this.contributions=n}return e.prototype.doSuggest=function(e,t,r){var o=this,a=t.getWordUntilPosition(r).word,l=new n.JSONParser,c=new n.JSONDocumentConfig;c.ignoreDanglingComma=!0;var u=l.parse(t.getValue(),c),p={currentWord:a,incomplete:!1,suggestions:[]},d={},m={add:function(e){d[e.label]||(d[e.label]=!0,p.suggestions.push(e))},setAsIncomplete:function(){p.incomplete=!0},error:function(e){s.onUnexpectedError(e)}};return this.schemaService.getSchemaForResource(e.toString(),u).then(function(e){var n=[],s=t.getOffsetFromPosition(r),l=u.getNodeFromOffsetEndInclusive(s),c=!0,d=a;if(l&&"string"===l.type){var f=l;if(f.isKey){var h=t.getRangeFromOffsetAndLength(l.start,l.end-l.start);p.overwriteBefore=r.column-h.startColumn,p.overwriteAfter=h.endColumn-r.column,c=!(l.parent&&l.parent.value),d=t.getValueInRange({startColumn:h.startColumn+1,startLineNumber:h.startLineNumber,endColumn:r.column,endLineNumber:r.lineNumber}),l.parent&&(l=l.parent.parent)}}if(l&&"object"===l.type){if(l.start===s)return p;if(e){var g=l.properties,y=0===g.length||s>=g[g.length-1].start;n.push(o.getPropertySuggestions(e,u,l,d,c,y,m))}else l.parent&&n.push(o.getSchemaLessPropertySuggestions(u,l,m))}if(l&&("string"===l.type||"number"===l.type||"boolean"===l.type||"null"===l.type)){var h=t.getRangeFromOffsetAndLength(l.start,l.end-l.start);p.overwriteBefore=r.column-h.startColumn,p.overwriteAfter=h.endColumn-r.column,l=l.parent}return e?n.push(o.getValueSuggestions(e,u,l,s,m)):n.push(o.getSchemaLessValueSuggestions(u,l,s,t,m)),i.Promise.join(n).then(function(){return p})})},e.prototype.getPropertySuggestions=function(e,t,n,r,o,s,a){var l=this,c=[];t.validate(e.schema,c,n.start);var u=[];return c.forEach(function(e){if(e.node===n&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach(function(e){var n=t[e];a.add({type:"property",label:e,codeSnippet:l.getSnippetForProperty(e,n,o,s),documentationLabel:n.description||""})});var i=e.schema.id;i&&l.contributions.forEach(function(e){u.push(e.collectPropertySuggestions(i,r,o,s,a))})}}),i.Promise.join(u)},e.prototype.getSchemaLessPropertySuggestions=function(e,t,n){var r=this,o=function(e){e.properties.forEach(function(e){var t=e.key.value;n.add({type:"property",label:t,codeSnippet:r.getSnippetForSimilarProperty(t,e.value),documentationLabel:""})})};if("property"===t.parent.type){var s=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===s&&e.value&&"object"===e.value.type&&o(e.value),!0})}else"array"===t.parent.type&&t.parent.items.forEach(function(e){"object"===e.type&&e!==t&&o(e)});return i.Promise.as(0)},e.prototype.getSchemaLessValueSuggestions=function(e,t,n,r,o){var s=this,a=function(e){var t=s.getMatchingSnippet(e,r);o.add({type:s.getSuggestionType(e.type),label:t,codeSnippet:t,documentationLabel:""}),"boolean"===e.type&&s.addBooleanSuggestion(!e.getValue(),o)};if(t){if("property"===t.type&&n>t.colonOffset){var l=t.value;if(l&&n>l.end)return;var c=t.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===c&&e.value&&a(e.value),!0})}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var c=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===c&&e.value&&"array"===e.value.type&&e.value.items.forEach(function(e){a(e)}),!0})}else t.items.forEach(function(e){a(e)})}else o.add({type:this.getSuggestionType("object"),label:"Empty object",codeSnippet:"{\n	{{}}\n}",documentationLabel:""}),o.add({type:this.getSuggestionType("array"),label:"Empty array",codeSnippet:"[\n	{{}}\n]",documentationLabel:""});return i.Promise.as(0)},e.prototype.getValueSuggestions=function(e,t,n,r,o){var s=this,a=[];if(n){var l=null;if(n&&"property"===n.type&&r>n.colonOffset){var c=n.value;if(c&&r>c.end)return i.Promise.as(0);l=n.key.value,n=n.parent}if(n&&(null!==l||"array"===n.type)){var u=[];t.validate(e.schema,u,n.start),u.forEach(function(e){if(e.node===n&&!e.inverted&&e.schema){if(e.schema.items&&(s.addDefaultSuggestion(e.schema.items,o),s.addEnumSuggestion(e.schema.items,o)),e.schema.properties){var t=e.schema.properties[l];t&&(s.addDefaultSuggestion(t,o),s.addEnumSuggestion(t,o))}var r=e.schema.id;r&&s.contributions.forEach(function(e){a.push(e.collectValueSuggestions(r,l,o))})}})}}else this.addDefaultSuggestion(e.schema,o),this.contributions.forEach(function(t){a.push(t.collectDefaultSuggestions(e.schema.id,o))});return i.Promise.join(a)},e.prototype.addBooleanSuggestion=function(e,t){t.add({type:this.getSuggestionType("boolean"),label:e?"true":"false",codeSnippet:this.getSnippetForValue(e),documentationLabel:""})},e.prototype.addEnumSuggestion=function(e,t){var n=this;Array.isArray(e["enum"])?e["enum"].forEach(function(r){return t.add({type:n.getSuggestionType(e.type),label:n.getLabelForValue(r),codeSnippet:n.getSnippetForValue(r),documentationLabel:""})}):"boolean"===e.type&&(this.addBooleanSuggestion(!0,t),this.addBooleanSuggestion(!1,t)),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return n.addEnumSuggestion(e,t)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return n.addEnumSuggestion(e,t)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return n.addEnumSuggestion(e,t)})},e.prototype.addDefaultSuggestion=function(e,t){var n=this;e["default"]&&t.add({type:this.getSuggestionType(e.type),label:this.getLabelForValue(e["default"]),codeSnippet:this.getSnippetForValue(e["default"]),typeLabel:o.localize(0,null)}),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){return n.addDefaultSuggestion(e,t)}),Array.isArray(e.anyOf)&&e.anyOf.forEach(function(e){return n.addDefaultSuggestion(e,t)}),Array.isArray(e.oneOf)&&e.oneOf.forEach(function(e){return n.addDefaultSuggestion(e,t)})},e.prototype.getLabelForValue=function(e){var t=JSON.stringify(e);return t=t.replace("{{","").replace("}}",""),t.length>57?t.substr(0,57).trim()+"...":t},e.prototype.getSnippetForValue=function(e){var t=JSON.stringify(e,null,"	");switch(typeof e){case"object":return null===e?"{{null}}":t;case"string":return'"{{'+t.substr(1,t.length-2)+'}}"';case"number":case"boolean":return"{{"+t+"}}"}return t},e.prototype.getSuggestionType=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:null}if(!e)return"text";switch(e){case"string":return"text";case"object":return"module";case"property":return"property";default:return"value"}},e.prototype.getMatchingSnippet=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:var n=t.getValueInRange(t.getRangeFromOffsetAndLength(e.start,e.end-e.start));return n}},e.prototype.getSnippetForProperty=function(e,t,n,i){var o='"'+e+'"';if(!n)return o;o+=": ";var s=t["default"];if(r.isUndefined(s))if(t["enum"]&&t["enum"].length>0)o+=this.getSnippetForValue(t["enum"][0]);else switch(t.type){case"boolean":o+="{{false}}";break;case"string":o+='"{{}}"';break;case"object":o+="{\n	{{}}\n}";break;case"array":o+="[\n	{{}}\n]";break;case"number":o+="{{0}}";break;case"null":o+="{{null}}";break;default:return o}else o+=this.getSnippetForValue(s);return i||(o+=","),o},e.prototype.getSnippetForSimilarProperty=function(e,t){return'"'+e+'"'},e}();t.JSONIntellisense=a});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/globPatternContribution",["require","exports","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/contributions/globPatternContribution","vs/platform/instantiation/common/instantiation"],function(e,t,n,r,i){var o=[{type:"value",label:r.localize(0,null),codeSnippet:'"**/*.{{extension}}": true',documentationLabel:r.localize(1,null)},{type:"value",label:r.localize(2,null),codeSnippet:'"**/*.{ext1,ext2,ext3}": true',documentationLabel:r.localize(3,null)},{type:"value",label:r.localize(4,null),codeSnippet:'"**/*.{{source-extension}}": { "when": "$(basename).{{target-extension}}" }',documentationLabel:r.localize(5,null)},{type:"value",label:r.localize(6,null),codeSnippet:'"{{name}}": true',documentationLabel:r.localize(7,null)},{type:"value",label:r.localize(8,null),codeSnippet:'"{folder1,folder2,folder3}": true',documentationLabel:r.localize(9,null)},{type:"value",label:r.localize(10,null),codeSnippet:'"**/{{name}}": true',documentationLabel:r.localize(11,null)}],s=[{type:"value",label:r.localize(12,null),codeSnippet:"true",documentationLabel:r.localize(13,null)},{type:"value",label:r.localize(14,null),codeSnippet:"false",documentationLabel:r.localize(15,null)},{type:"value",label:r.localize(16,null),codeSnippet:'{ "when": "$(basename).{{extension}}" }',documentationLabel:r.localize(17,null)}],a=function(){function e(e){}return e.prototype.collectDefaultSuggestions=function(e,t){return n.Promise.as(0)},e.prototype.collectPropertySuggestions=function(e,t,r,i,s){return"glob-pattern"===e&&o.forEach(function(e){return s.add(e)}),n.Promise.as(0)},e.prototype.collectValueSuggestions=function(e,t,r){return"glob-pattern"===e&&s.forEach(function(e){return r.add(e)}),n.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){return null},e=__decorate([__param(0,i.INullService)],e)}();t.GlobPatternContribution=a});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/bowerJSONContribution",["require","exports","vs/base/common/strings","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/contributions/bowerJSONContribution","vs/platform/request/common/request"],function(e,t,n,r,i,o){var s=function(){function e(e){this.topRanked=["twitter","bootstrap","angular-1.1.6","angular-latest","angulerjs","d3","myjquery","jq","abcdef1234567890","jQuery","jquery-1.11.1","jquery","sushi-vanilla-x-data","font-awsome","Font-Awesome","font-awesome","fontawesome","html5-boilerplate","impress.js","homebrew","backbone","moment1","momentjs","moment","linux","animate.css","animate-css","reveal.js","jquery-file-upload","blueimp-file-upload","threejs","express","chosen","normalize-css","normalize.css","semantic","semantic-ui","Semantic-UI","modernizr","underscore","underscore1","material-design-icons","ionic","chartjs","Chart.js","nnnick-chartjs","select2-ng","select2-dist","phantom","skrollr","scrollr","less.js","leancss","parser-lib","hui","bootstrap-languages","async","gulp","jquery-pjax","coffeescript","hammer.js","ace","leaflet","jquery-mobile","sweetalert","typeahead.js","soup","typehead.js","sails","codeigniter2"],this.requestService=e}return e.prototype.collectDefaultSuggestions=function(e,t){if("http://json.schemastore.org/bower"===e){var n={name:"{{name}}",description:"{{description}}",author:"{{author}}",version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}};t.add({type:"type",label:i.localize(0,null),codeSnippet:JSON.stringify(n,null,"	"),documentationLabel:""})}return r.Promise.as(0)},e.prototype.collectPropertySuggestions=function(e,t,n,o,s){if("bower-packages"===e){if(t.length>0){var a="https://bower.herokuapp.com/packages/search/"+encodeURIComponent(t);
return this.requestService.makeRequest({url:a}).then(function(e){if(200!==e.status)return s.error(i.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(Array.isArray(t)){for(var r=t,a=0;a<r.length;a++){var l=r[a].name,c=r[a].description||"",u=JSON.stringify(l);n&&(u+=': "{{*}}"',o||(u+=",")),s.add({type:"property",label:l,codeSnippet:u,documentationLabel:c})}s.setAsIncomplete()}}catch(p){}},function(e){return s.error(i.localize(2,null,e.responseText)),0})}this.topRanked.forEach(function(e){var t=JSON.stringify(e);n&&(t+=': "{{*}}"',o||(t+=",")),s.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})}),s.setAsIncomplete()}return r.Promise.as(0)},e.prototype.collectValueSuggestions=function(e,t,n){return r.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){if("bower-package"===e){var r=[];r.push({className:"type",text:i.localize(3,null,t)});var o="https://bower.herokuapp.com/packages/"+encodeURIComponent(t);return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.url){var i=t.url;n.startsWith(i,"git://")&&(i=i.substring(6)),n.endsWith(i,".git")&&(i=i.substring(0,i.length-4)),r.push({className:"documentation",text:i})}}catch(o){}return r},function(e){return r})}return null},e=__decorate([__param(0,o.IRequestService)],e)}();t.BowerJSONContribution=s});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/packageJSONContribution",["require","exports","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/contributions/packageJSONContribution","vs/platform/request/common/request"],function(e,t,n,r,i){var o=40,s=function(){function e(e){this.mostDependedOn=["lodash","async","underscore","request","commander","express","debug","chalk","colors","q","coffee-script","mkdirp","optimist","through2","yeoman-generator","moment","bluebird","glob","gulp-util","minimist","cheerio","jade","redis","node-uuid","socket","io","uglify-js","winston","through","fs-extra","handlebars","body-parser","rimraf","mime","semver","mongodb","jquery","grunt","connect","yosay","underscore","string","xml2js","ejs","mongoose","marked","extend","mocha","superagent","js-yaml","xtend","shelljs","gulp","yargs","browserify","minimatch","react","less","prompt","inquirer","ws","event-stream","inherits","mysql","esprima","jsdom","stylus","when","readable-stream","aws-sdk","concat-stream","chai","promise","wrench"],this.requestService=e}return e.prototype.collectDefaultSuggestions=function(e,t){if("http://json.schemastore.org/package"===e){var i={name:"{{name}}",description:"{{description}}",author:"{{author}}",version:"{{1.0.0}}",main:"{{pathToMain}}",dependencies:{}};t.add({type:"module",label:r.localize(0,null),codeSnippet:JSON.stringify(i,null,"	"),documentationLabel:""})}return n.Promise.as(0)},e.prototype.collectPropertySuggestions=function(e,t,i,s,a){if("npm-packages"===e){var l;if(t.length>0)return l="https://skimdb.npmjs.com/registry/_design/app/_view/browseAll?group_level=1&limit="+o+"&start_key=%5B%22"+encodeURIComponent(t)+"%22%5D&end_key=%5B%22"+encodeURIComponent(t+"z")+"%22,%7B%7D%5D",this.requestService.makeRequest({url:l}).then(function(e){if(200!==e.status)return a.error(r.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(t&&Array.isArray(t.rows)){for(var n=t.rows,l=0;l<n.length;l++){var c=n[l].key;if(Array.isArray(c)&&c.length>0){var u=c[0],p=JSON.stringify(u);i&&(p+=': "{{*}}"',s||(p+=",")),a.add({type:"property",label:u,codeSnippet:p,documentationLabel:""})}}n.length===o&&a.setAsIncomplete()}}catch(d){}},function(e){return a.error(r.localize(2,null,e.responseText)),0});this.mostDependedOn.forEach(function(e){var t=JSON.stringify(e);i&&(t+=': "{{*}}"',s||(t+=",")),a.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})}),a.setAsIncomplete()}return n.Promise.as(0)},e.prototype.collectValueSuggestions=function(e,t,i){if("npm-packages"===e){var o="http://registry.npmjs.org/"+encodeURIComponent(t)+"/latest";return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.version){var n=t.version,o=JSON.stringify(n);i.add({type:"class",label:o,codeSnippet:o,documentationLabel:r.localize(3,null)}),o=JSON.stringify("^"+n),i.add({type:"class",label:o,codeSnippet:o,documentationLabel:r.localize(4,null)}),o=JSON.stringify("~"+n),i.add({type:"class",label:o,codeSnippet:o,documentationLabel:r.localize(5,null)})}}catch(s){}return 0},function(e){return 0})}return n.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){if("npm-package"===e){var n=[];n.push({className:"type",text:r.localize(6,null,t)});var i="http://registry.npmjs.org/"+encodeURIComponent(t)+"/latest";return this.requestService.makeRequest({url:i}).then(function(e){try{var t=JSON.parse(e.responseText);t&&(t.description&&n.push({className:"documentation",text:t.description}),t.version&&n.push({className:"documentation",text:r.localize(7,null,t.version)}))}catch(i){}return n},function(e){return n})}return null},e=__decorate([__param(0,i.IRequestService)],e)}();t.PackageJSONContribution=s});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/contributions/projectJSONContribution",["require","exports","vs/base/common/winjs.base","vs/nls!vs/languages/json/common/contributions/projectJSONContribution","vs/platform/request/common/request"],function(e,t,n,r,i){var o=40,s=function(){function e(e){this.requestService=e}return e.prototype.collectDefaultSuggestions=function(e,t){if("http://json.schemastore.org/project"===e){var i={version:"{{1.0.0-*}}",dependencies:{},frameworks:{dnx451:{},dnxcore50:{}}};t.add({type:"type",label:r.localize(0,null),codeSnippet:JSON.stringify(i,null,"	"),documentationLabel:""})}return n.Promise.as(0)},e.prototype.collectPropertySuggestions=function(e,t,i,s,a){if("nugget-packages"===e){var l;return l=t.length>0?"https://www.nuget.org/api/v2/Packages?$filter=Id%20ge%20'"+encodeURIComponent(t)+"'%20and%20Id%20lt%20'"+encodeURIComponent(t+"z")+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Id,Version,Description&$format=json&$top="+o:"https://www.nuget.org/api/v2/Packages?$filter=IsAbsoluteLatestVersion%20eq%20true&$orderby=DownloadCount%20desc&$top="+o+"&$select=Id,Version,DownloadCount,Description&$format=json",this.requestService.makeRequest({url:l}).then(function(e){if(200!==e.status)return a.error(r.localize(1,null,e.responseText)),0;try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d)){for(var n=t.d,l=0;l<n.length;l++){var c=n[l],u=c.Id,p=c.Version;if(u){var d=c.Description,m=c.Version,f=JSON.stringify(u);i&&(f+=': "{{'+p+'}}"',s||(f+=",")),a.add({type:"property",label:u,codeSnippet:f,typeLabel:m,documentationLabel:d})}}n.length===o&&a.setAsIncomplete()}}catch(h){}},function(e){return a.error(r.localize(2,null,e.responseText)),0})}return n.Promise.as(0)},e.prototype.collectValueSuggestions=function(e,t,i){if("nugget-packages"===e){var s="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(t)+"'&$select=Version,IsAbsoluteLatestVersion&$format=json&$top="+o;return this.requestService.makeRequest({url:s}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d)){for(var n=t.d,s=0;s<n.length;s++){var a=n[s],l=a.Version;if(l){var c=JSON.stringify(l),u="true"===a.IsAbsoluteLatestVersion,p=c,d="";u&&(d=r.localize(3,null)),i.add({type:"class",label:p,codeSnippet:c,documentationLabel:d})}}n.length===o&&i.setAsIncomplete()}}catch(m){}return 0},function(e){return 0})}return n.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){if("nugget-package"===e){var n=[];n.push({className:"type",text:r.localize(4,null,t)});var i="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(t)+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Version,Description&$format=json&$top=5";return this.requestService.makeRequest({url:i}).then(function(e){var t=e.responseText;if(t)try{var i=JSON.parse(t);if(i.d&&i.d[0]){var o=i.d[0];o.Description&&n.push({className:"documentation",text:o.Description}),o.Version&&n.push({className:"documentation",text:r.localize(5,null,o.Version)})}}catch(s){}return n},function(e){return n})}return null},e=__decorate([__param(0,i.IRequestService)],e)}();t.ProjectJSONContribution=s});var __decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/jsonSchemaService",["require","exports","vs/nls!vs/languages/json/common/jsonSchemaService","vs/base/common/objects","vs/base/common/json","vs/base/common/strings","vs/base/common/uri","vs/base/common/types","vs/base/common/winjs.base","vs/editor/common/services/resourceService","vs/platform/request/common/request","vs/platform/workspace/common/workspace","vs/platform/telemetry/common/telemetry"],function(e,t,n,r,i,o,s,a,l,c,u,p,d){var m=function(){function e(e){this.combinedSchemaId="local://combinedSchema/"+encodeURIComponent(e);try{this.patternRegExp=new RegExp(o.convertSimple2RegExpPattern(e)+"$")}catch(t){this.patternRegExp=null}this.schemas=[],this.combinedSchema=null}return e.prototype.addSchema=function(e){this.schemas.push(e),this.combinedSchema=null},e.prototype.matchesPattern=function(e){return this.patternRegExp&&this.patternRegExp.test(e)},e.prototype.getCombinedSchema=function(e){return this.combinedSchema||(this.combinedSchema=e.createCombinedSchema(this.combinedSchemaId,this.schemas)),this.combinedSchema},e}(),f=function(){function e(e,t,n){this.service=e,this.url=t,n&&(this.unresolvedSchema=l.Promise.as(new h(n)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(function(t){return e.service.resolveSchemaContent(t)})),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null},e}(),h=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e}();t.UnresolvedSchema=h;var g=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){return this.getSectionRecursive(e,this.schema)},e.prototype.getSectionRecursive=function(e,t){var n=this;if(!t||0===e.length)return t;var r=e.shift();if(t.properties&&t.properties[r])return this.getSectionRecursive(e,t.properties[r]);if(a.isObject(t.patternProperties))Object.keys(t.patternProperties).forEach(function(i){var o=new RegExp(i);return o.test(r)?n.getSectionRecursive(e,t.patternProperties[i]):void 0});else{if(a.isObject(t.additionalProperties))return this.getSectionRecursive(e,t.additionalProperties);if(r.match("[0-9]+")){if(a.isObject(t.items))return this.getSectionRecursive(e,t.items);if(Array.isArray(t.items))try{var i=parseInt(r,10);return t.items[i]?this.getSectionRecursive(e,t.items[i]):null}catch(o){return null}}}return null},e}();t.ResolvedSchema=g;var y=function(){function e(e,t,n,r){var i=this;this.requestService=e,this.contextService=n,this.telemetryService=t,this.callOnDispose=[],r&&this.callOnDispose.push(r.addListener_(c.ResourceEvents.CHANGED,function(e){return i.onResourceChange(e)})),this.contributionSchemas={},this.contributionAssociations={},this.preloadedSchemas={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.addPreloadedFileSchemas()}return e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=e.url.toString(),n=this.schemasById[t];n&&n.clearSchema()},e.prototype.normalizeId=function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var n in t)n=this.normalizeId(n),this.contributionSchemas[n]=this.addSchemaHandle(n,t[n])}if(e.schemaAssociations){var r=e.schemaAssociations;for(var i in r){var o=r[i];if(this.contextService){var a=this.contextService.getConfiguration().env;a&&(i=i.replace(/%APP_SETTINGS_HOME%/,s["default"].file(a.appSettingsHome).toString()))}this.contributionAssociations[i]=o;var l=this.getOrAddFilePatternAssociation(i);o.forEach(function(e){return l.addSchema(e)})}}},e.prototype.addSchemaHandle=function(e,t){var n=new f(this,e,t);return this.schemasById[e]=n,n},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.getOrAddFilePatternAssociation=function(e){var t=this.filePatternAssociationById[e];return t||(t=new m(e),this.filePatternAssociationById[e]=t,this.filePatternAssociations.push(t)),t},e.prototype.registerExternalSchema=function(e,t,n){var r=this;void 0===t&&(t=null);var i=this.normalizeId(e);return t&&t.forEach(function(t){r.getOrAddFilePatternAssociation(t).addSchema(e)}),n?this.addSchemaHandle(i,n):this.getOrAddSchemaHandle(i)},e.prototype.clearExternalSchemas=function(){this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={};for(var e in this.preloadedSchemas)this.schemasById[e]=this.preloadedSchemas[e];for(var e in this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e];for(var t in this.contributionAssociations){var n=this.getOrAddFilePatternAssociation(t);this.contributionAssociations[t].forEach(function(e){return n.addSchema(e)})}},e.prototype.getResolvedSchema=function(e){var t=this.normalizeId(e),n=this.schemasById[t];return n?n.getResolvedSchema():l.TPromise.as(null)},e.prototype.loadSchema=function(e){return this.telemetryService&&o.startsWith(e,"https://schema.management.azure.com")&&this.telemetryService.publicLog("json.schema",{schemaURL:e}),this.requestService.makeRequest({url:e}).then(function(t){var r=t.responseText;if(!r){var o=n.localize(0,null,e);return new h({},[o])}var s={},a=[];s=i.parse(r,l);var l=a.length?[n.localize(1,null,e,a[0])]:[];return new h(s,l)},function(t){var r=n.localize(2,null,e,t.statusText||t.toString());return new h({},[r])})},e.prototype.resolveSchemaContent=function(e){var t=this,i=e.errors.slice(0),o=e.schema,s=function(e,t){if(!t)return e;var n=e;return t.substr(1).split("/").some(function(e){return n=n[e],!n}),n},c=function(e,t,o){var a=s(t,o);"object"==typeof a?r.mixin(e,a,!1):i.push(n.localize(3,null,o,t.id)),delete e.$ref},u=function(e,r,o){return t.getOrAddSchemaHandle(r).getUnresolvedSchema().then(function(t){return t.errors.length&&i.push(n.localize(4,null,r+"#"+o,t.errors[0])),c(e,t.schema,o),p(e,t.schema)})},p=function(e,t){for(var n=[e],r=[],i=[];n.length;){var o=n.pop();if(!(r.indexOf(o)>=0))if(r.push(o),Array.isArray(o))o.forEach(function(e){n.push(e)});else if(a.isObject(o)){if(o.$ref){var s=o.$ref.split("#",2);if(s[0].length>0){i.push(u(o,s[0],s[1]));continue}c(o,t,s[1])}for(var p in o)n.push(o[p])}}return l.Promise.join(i)};return p(o,o).then(function(e){return new g(o,i)})},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter(function(e){return"$schema"===e.key.value&&!!e.value});if(n.length>0){var r=n[0].value.getValue();if(!o.startsWith(r,"http://")&&!o.startsWith(r,"https://")&&!o.startsWith(r,"file://")){var i=this.contextService.toResource(r);i&&(r=i.toString())}if(r){var s=this.normalizeId(r);return this.getOrAddSchemaHandle(s).getResolvedSchema()}}}for(var a=this.filePatternAssociations.length-1;a>=0;a--){var c=this.filePatternAssociations[a];if(c.matchesPattern(e))return c.getCombinedSchema(this).getResolvedSchema()}return l.TPromise.as(null)},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.schemasById[t[0]];var n={allOf:t.map(function(e){return{$ref:e}})};return this.addSchemaHandle(e,n)},e.prototype.addPreloadedFileSchema=function(e,t){var n=this.normalizeId(e);this.preloadedSchemas[n]=this.addSchemaHandle(n,t)},e.prototype.addPreloadedFileSchemas=function(){this.addPreloadedFileSchema("http://json-schema.org/draft-04/schema#",{id:"http://json-schema.org/draft-04/schema#",title:n.localize(5,null),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{type:"string","enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri",description:n.localize(6,null)},$schema:{type:"string",format:"uri",description:n.localize(7,null)},title:{type:"string",description:n.localize(8,null)},description:{type:"string",description:n.localize(9,null)},"default":{description:n.localize(10,null)},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0,description:n.localize(11,null)},maximum:{type:"number",description:n.localize(12,null)},exclusiveMaximum:{type:"boolean","default":!1,description:n.localize(13,null)},minimum:{type:"number",description:n.localize(14,null)},exclusiveMinimum:{type:"boolean","default":!1,description:n.localize(15,null)},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(16,null)},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(17,null)},pattern:{type:"string",format:"regex",description:n.localize(18,null)},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{},description:n.localize(19,null)},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{},description:n.localize(20,null)},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(21,null)},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(22,null)},uniqueItems:{type:"boolean","default":!1,description:n.localize(23,null)},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:n.localize(24,null)},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:n.localize(25,null)},required:{allOf:[{$ref:"#/definitions/stringArray"}],description:n.localize(26,null)},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{},description:n.localize(27,null)},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(28,null)},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(29,null)},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{},description:n.localize(30,null)},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]},description:n.localize(31,null)},"enum":{type:"array",minItems:1,uniqueItems:!0,description:n.localize(32,null)},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}],description:n.localize(33,null)},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(34,null)},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(35,null)},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:n.localize(36,null)},not:{allOf:[{$ref:"#"}],description:n.localize(37,null)}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}),this.addPreloadedFileSchema("http://json.schemastore.org/project",{title:n.localize(38,null),$schema:"http://json-schema.org/draft-04/schema#",id:"http://json.schemastore.org/project",type:"object",definitions:{compilationOptions:{description:n.localize(39,null),type:"object",properties:{define:{type:"array",items:{type:"string",uniqueItems:!0}},warningsAsErrors:{type:"boolean","default":!1},allowUnsafe:{type:"boolean","default":!1},optimize:{type:"boolean","default":!1},languageVersion:{type:"string","enum":["csharp1","csharp2","csharp3","csharp4","csharp5","csharp6","experimental"]}}},configType:{type:"object",properties:{dependencies:{$ref:"#/definitions/dependencies"},compilationOptions:{$ref:"#/definitions/compilationOptions"},frameworkAssemblies:{$ref:"#/definitions/dependencies"}}},dependencies:{type:"object",additionalProperties:{type:["string","object"],properties:{version:{type:"string",description:n.localize(40,null)},type:{type:"string","default":"default","enum":["default","build"],description:n.localize(41,null)}},id:"nugget-package"},description:n.localize(42,null),id:"nugget-packages"},script:{type:["string","array"],items:{type:"string"},description:n.localize(43,null)}},properties:{authors:{description:n.localize(44,null),type:"array",items:{type:"string",uniqueItems:!0}},bundleExclude:{description:n.localize(45,null),type:["string","array"],items:{type:"string"},"default":""},code:{description:n.localize(46,null),type:["string","array"],items:{type:"string"},"default":"**\\*.cs"},commands:{description:n.localize(47,null),type:"object",additionalProperties:{type:"string"}},compilationOptions:{$ref:"#/definitions/compilationOptions"},configurations:{type:"object",description:n.localize(48,null),additionalProperties:{type:"object",properties:{compilationOptions:{$ref:"#/definitions/compilationOptions"}}}},dependencies:{$ref:"#/definitions/dependencies"},description:{description:n.localize(49,null),type:"string"},exclude:{description:n.localize(50,null),type:["string","array"],items:{type:"string"},"default":["bin/**/*.*","obj/**/*.*"]},frameworks:{description:n.localize(51,null),type:"object",additionalProperties:{$ref:"#/definitions/configType"}},preprocess:{description:n.localize(52,null),type:"string","default":"Compiler\\Preprocess\\**\\*.cs"},resources:{description:n.localize(53,null),type:["string","array"],items:{type:"string"},"default":"Compiler\\Resources\\**\\*.cs"},scripts:{type:"object",description:n.localize(54,null),properties:{prepack:{$ref:"#/definitions/script"},postpack:{$ref:"#/definitions/script"},prebundle:{$ref:"#/definitions/script"},postbundle:{$ref:"#/definitions/script"},prerestore:{$ref:"#/definitions/script"},postrestore:{$ref:"#/definitions/script"},prepare:{$ref:"#/definitions/script"}}},shared:{description:n.localize(55,null),type:["string","array"],items:{type:"string"},"default":"Compiler\\Shared\\**\\*.cs"},version:{description:n.localize(56,null),type:"string"},webroot:{description:n.localize(57,null),type:"string"}}}),this.addPreloadedFileSchema("http://json.schemastore.org/bower",{title:n.localize(58,null),$schema:"http://json-schema.org/draft-04/schema#",id:"http://json.schemastore.org/bower",type:"object",required:["name"],patternProperties:{"^_":{description:n.localize(59,null),additionalProperties:!0,additionalItems:!0}},properties:{name:{description:n.localize(60,null),type:"string",maxLength:50},description:{description:n.localize(61,null),type:"string"},version:{description:n.localize(62,null),type:"string"},main:{description:n.localize(63,null),type:["string","array"]},license:{description:n.localize(64,null),type:["string","array"],maxLength:140},ignore:{description:n.localize(65,null),type:["string","array"]},keywords:{description:n.localize(66,null),type:"array",items:{type:"string",maxLength:50}},authors:{description:n.localize(67,null),type:"array",items:{type:["string","object"]}},homepage:{description:n.localize(68,null),type:"string"},repository:{description:n.localize(69,null),type:"object",properties:{type:{type:"string","enum":["git"]},url:{type:"string"}}},dependencies:{id:"bower-packages",description:n.localize(70,null),type:"object",additionalProperties:{id:"bower-package",type:"string"}},devDependencies:{id:"bower-packages",description:n.localize(71,null),type:"object",additionalProperties:{id:"bower-package",type:"string"}},resolutions:{description:n.localize(72,null),type:"object"},"private":{description:n.localize(73,null),type:"boolean"},exportsOverride:{description:n.localize(74,null),type:"object",additionalProperties:{type:"object",additionalProperties:{type:"string"}}},moduleType:{description:n.localize(75,null),type:"array",items:{"enum":["amd","es6","globals","node","yui"]}}}}),this.addPreloadedFileSchema("http://json.schemastore.org/package",{id:"http://json.schemastore.org/package",description:n.localize(76,null),type:"object",required:["name","version"],definitions:{person:{description:n.localize(77,null),type:["object","string"],required:["name"],properties:{name:{type:"string"},url:{type:"string",format:"uri"},email:{type:"string",format:"email"}}},dependency:{id:"npm-packages",description:n.localize(78,null),type:"object",additionalProperties:{type:"string"}}},patternProperties:{"^_":{description:n.localize(79,null),additionalProperties:!0,additionalItems:!0}},properties:{name:{description:n.localize(80,null),type:"string"},version:{description:n.localize(81,null),type:"string"},description:{description:n.localize(82,null),type:"string"},icon:{description:n.localize(83,null),type:"string"},keywords:{description:n.localize(84,null),type:"array"},homepage:{description:n.localize(85,null),type:"string"},bugs:{description:n.localize(86,null),type:["object","string"],properties:{url:{type:"string",description:n.localize(87,null),format:"uri"},email:{type:"string",description:n.localize(88,null)}}},license:{type:"string",description:n.localize(89,null)},licenses:{description:n.localize(90,null),type:"array",items:{type:"object",properties:{type:{type:"string"},url:{type:"string",format:"uri"}}}},author:{$ref:"#/definitions/person"},contributors:{description:n.localize(91,null),type:"array",items:{$ref:"#/definitions/person"}},maintainers:{description:n.localize(92,null),type:"array",items:{$ref:"#/definitions/person"}},files:{description:n.localize(93,null),type:"array",items:{type:"string"}},main:{description:n.localize(94,null),type:"string"},bin:{type:["string","object"],additionalProperties:{type:"string"}},man:{type:["array","string"],description:n.localize(95,null),items:{type:"string"}},directories:{type:"object",properties:{bin:{description:n.localize(96,null),type:"string"},doc:{description:n.localize(97,null),type:"string"},example:{description:n.localize(98,null),type:"string"},lib:{description:n.localize(99,null),type:"string"},man:{description:n.localize(100,null),type:"string"},test:{type:"string"}}},repository:{description:n.localize(101,null),type:"object",properties:{type:{type:"string"},url:{type:"string"}}},scripts:{description:n.localize(102,null),type:"object",additionalProperties:{type:"string"}},config:{description:n.localize(103,null),type:"object",additionalProperties:!0},dependencies:{$ref:"#/definitions/dependency"},devDependencies:{$ref:"#/definitions/dependency"},bundleDependencies:{type:"array",description:n.localize(104,null),items:{type:"string"}},bundledDependencies:{type:"array",description:n.localize(105,null),items:{type:"string"}},optionalDependencies:{$ref:"#/definitions/dependency"},peerDependencies:{$ref:"#/definitions/dependency"},engines:{type:"object",additionalProperties:{type:"string"}},engineStrict:{type:"boolean"},os:{type:"array",items:{type:"string"}},cpu:{type:"array",items:{type:"string"}},preferGlobal:{type:"boolean",description:n.localize(106,null)},"private":{type:"boolean",description:n.localize(107,null)},publishConfig:{type:"object",additionalProperties:!0},dist:{type:"object",properties:{shasum:{type:"string"},tarball:{type:"string"}}},readme:{type:"string"}}}),this.addPreloadedFileSchema("http://json.schemastore.org/global",{title:n.localize(108,null),type:"object",additionalProperties:!0,required:["projects"],properties:{projects:{type:"array",description:n.localize(109,null),items:{type:"string"}},sources:{type:"array",description:n.localize(110,null),items:{type:"string"}},sdk:{type:"object",description:n.localize(111,null),properties:{version:{type:"string",description:n.localize(112,null)},runtime:{type:"string",description:n.localize(113,null)},architecture:{type:"string",description:n.localize(114,null)}}}}}),this.addPreloadedFileSchema("http://json.schemastore.org/tsconfig",{title:n.localize(115,null),$schema:"http://json-schema.org/draft-04/schema#",type:"object","default":{compilerOptions:{target:"ES5",module:"commonjs"}},properties:{compilerOptions:{type:"object",description:n.localize(116,null),properties:{charset:{description:n.localize(117,null),type:"string"},declaration:{description:n.localize(118,null),type:"boolean"},diagnostics:{description:n.localize(119,null),type:"boolean"},emitBOM:{description:n.localize(120,null),type:"boolean"},inlineSourceMap:{description:n.localize(121,null),type:"boolean"},inlineSources:{description:n.localize(122,null),type:"boolean"},listFiles:{description:n.localize(123,null),type:"boolean"},locale:{description:n.localize(124,null),type:"string"},mapRoot:{description:n.localize(125,null),type:"string",format:"uri"},module:{description:n.localize(126,null),"enum":["commonjs","amd","umd","system"]},newLine:{description:n.localize(127,null),"enum":["CRLF","LF"]},noEmit:{description:n.localize(128,null),type:"boolean"},noEmitOnError:{description:n.localize(129,null),type:"boolean"},noEmitHelpers:{description:n.localize(130,null),type:"boolean"},noImplicitAny:{description:n.localize(131,null),type:"boolean"},noLib:{description:n.localize(132,null),type:"boolean"},noResolve:{description:n.localize(133,null),type:"boolean"},out:{description:n.localize(134,null),type:"string",format:"uri"},outDir:{description:n.localize(135,null),type:"string",format:"uri"},preserveConstEnums:{description:n.localize(136,null),type:"boolean"},removeComments:{description:n.localize(137,null),type:"boolean"},rootDir:{description:n.localize(138,null),type:"string"},sourceMap:{description:n.localize(139,null),type:"boolean"},sourceRoot:{description:n.localize(140,null),type:"string",format:"uri"},suppressImplicitAnyIndexErrors:{description:n.localize(141,null),type:"boolean"},target:{description:n.localize(142,null),"enum":["ES3","ES5","ES6","es3","es5","es6"],"default":"ES3"},watch:{description:n.localize(143,null),type:"boolean"},jsx:{description:n.localize(144,null),"enum":["react","preserve"],"default":"react"},emitDecoratorMetadata:{description:n.localize(145,null),type:"boolean"},isolatedModules:{description:n.localize(146,null),type:"boolean"},experimentalDecorators:{description:n.localize(147,null),type:"boolean"},experimentalAsyncFunctions:{description:n.localize(148,null),type:"boolean"}}},files:{type:"array",description:n.localize(149,null),items:{type:"string",format:"uri"}}}}),this.addPreloadedFileSchema("http://opentools.azurewebsites.net/jsconfig",{title:n.localize(150,null),type:"object","default":{compilerOptions:{
target:"ES5"}},properties:{compilerOptions:{type:"object",description:n.localize(151,null),properties:{charset:{description:n.localize(152,null),type:"string"},diagnostics:{description:n.localize(153,null),type:"boolean"},locale:{description:n.localize(154,null),type:"string"},mapRoot:{description:n.localize(155,null),type:"string",format:"uri"},module:{description:n.localize(156,null),"enum":["commonjs","amd","system","umd"]},noLib:{description:n.localize(157,null),type:"boolean"},target:{description:n.localize(158,null),"enum":["ES3","ES5","ES6","es3","es5","es6"],"default":"ES3"},experimentalDecorators:{description:n.localize(159,null),type:"boolean"}}},files:{type:"array",description:n.localize(160,null),items:{type:"string",format:"uri"}},exclude:{type:"array",description:n.localize(161,null),items:{type:"string",format:"uri"}}}})},e=__decorate([__param(0,u.IRequestService),__param(1,d.ITelemetryService),__param(2,p.IWorkspaceContextService),__param(3,c.IResourceService)],e)}();t.JSONSchemaService=y});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__decorate=this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,r){return void(r&&r(t,n))},void 0);case 4:return e.reduceRight(function(e,r){return r&&r(t,n,e)||e},r)}},__param=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};define("vs/languages/json/common/jsonWorker",["require","exports","vs/base/common/severity","vs/editor/common/modes/abstractModeWorker","./parser/jsonParser","vs/languages/json/common/features/jsonFormatter","./jsonSchemaService","./jsonIntellisense","vs/base/common/winjs.base","vs/base/common/strings","./contributions/projectJSONContribution","vs/editor/common/modes/supports","./contributions/packageJSONContribution","./contributions/bowerJSONContribution","./contributions/globPatternContribution","vs/base/common/errors","vs/platform/markers/common/markers","vs/platform/request/common/request","vs/platform/workspace/common/workspace","vs/editor/common/services/resourceService","vs/platform/instantiation/common/instantiation"],function(e,t,n,r,i,o,s,a,l,c,u,p,d,m,f,h,g,y,v,b,S){var z=function(e){function t(t,n,r,i,o,l,c){e.call(this,t,n,r,i),this.jsonMode=t,this.requestService=o,this.contextService=l,this.schemaService=c.createInstance(s.JSONSchemaService),this.contributions=[c.createInstance(u.ProjectJSONContribution),c.createInstance(d.PackageJSONContribution),c.createInstance(m.BowerJSONContribution),c.createInstance(f.GlobPatternContribution)],this.jsonIntellisense=new a.JSONIntellisense(this.schemaService,this.requestService,this.contributions)}return __extends(t,e),t.prototype._createInPlaceReplaceSupport=function(){return new p.WorkerInplaceReplaceSupport(this.resourceService,this)},t.prototype._doConfigure=function(e){var t=this;return e&&e.schemas&&(this.schemaService.clearExternalSchemas(),e.schemas.forEach(function(e){if(e.url&&(e.fileMatch||e.schema)){var n=e.url;if(!c.startsWith(n,"http://")&&!c.startsWith(n,"https://")&&!c.startsWith(n,"file://")){var r=t.contextService.toResource(n);r&&(n=r.toString())}n&&t.schemaService.registerExternalSchema(n,e.fileMatch,e.schema)}else if(e.filePattern&&e.schemaPath){var n=t.contextService.toResource(e.schemaPath).toString(),i=e.filePattern?[e.filePattern]:[];t.schemaService.registerExternalSchema(n,i)}})),l.TPromise.as(!0)},t.prototype.setSchemaContributions=function(e){return this.schemaService.setSchemaContributions(e),l.TPromise.as(!0)},t.prototype.doValidate=function(e){var t=this,r=this.resourceService.get(e),o=new i.JSONParser,s=r.getValue();if(0!==s.length){var a=o.parse(s);this.schemaService.getSchemaForResource(e.toString(),a).then(function(i){if(i)if(i.errors.length&&a.root){var o="object"===a.root.type?a.root.getFirstProperty("$schema"):null;if(o){var s=o.value||o;a.warnings.push({location:{start:s.start,end:s.end},message:i.errors[0]})}else a.warnings.push({location:{start:a.root.start,end:a.root.start+1},message:i.errors[0]})}else a.validate(i.schema);var l=a.errors.concat(a.warnings).map(function(e,t){var i=r.getPositionFromOffset(e.location.start),o=r.getPositionFromOffset(e.location.end);return{message:e.message,severity:t>=a.errors.length?n["default"].Warning:n["default"].Error,startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:o.lineNumber,endColumn:o.column}});t.markerService.changeOne(t._getMode().getId(),e,l)})}},t.prototype.doSuggest=function(e,t){var n=this.resourceService.get(e);return this.jsonIntellisense.doSuggest(e,n,t)},t.prototype.computeInfo=function(e,t){var n=this,r=this.resourceService.get(e),o=new i.JSONParser,s=o.parse(r.getValue()),a=r.getOffsetFromPosition(t),c=s.getNodeFromOffset(a),u=c;if(c&&"string"===c.type){var p=c;if(p.isKey){var d=c.parent;c=d.value}}return c?this.schemaService.getSchemaForResource(e.toString(),s).then(function(e){if(e){var t=[];s.validate(e.schema,t,c.start);var i=null,o=null;if(t.every(function(e){return e.node===c&&!e.inverted&&e.schema&&(i=i||e.schema.description,o=o||e.schema.id),!0}),o&&c.name)for(var a=n.contributions.length-1;a>=0;a--){var l=n.contributions[a],p=l.getInfoContribution(o,c.name);if(p)return p.then(function(e){return n.createInfoResult(e,u,r)})}if(i){var d=[{className:"documentation",text:i}];return n.createInfoResult(d,u,r)}}return null}):l.Promise.as(null)},t.prototype.createInfoResult=function(e,t,n){var r=n.getRangeFromOffsetAndLength(t.start,t.end-t.start),i={value:"",htmlContent:e,className:"typeInfo json",range:r};return i},t.prototype.getOutline=function(e){function t(e,r){if("array"===r.type)r.items.forEach(function(n){t(e,n)});else if("object"===r.type){var i=r;i.properties.forEach(function(r){var i=n.getRangeFromOffsetAndLength(r.start,r.end-r.start),o=r.value;if(o){var s=t([],o),a="object"===o.type?"module":o.type;e.push({label:r.key.getValue(),icon:a,type:o.type,range:i,children:s})}})}return e}var n=this.resourceService.get(e),r=new i.JSONParser,o=r.parse(n.getValue()),s=o.root;if(!s)return l.Promise.as(null);var a=e.toString();if(("inmemory://defaults/keybindings.json"===a||c.endsWith(a.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){var u=[];return s.items.forEach(function(e){if("object"===e.type){var t=e.getFirstProperty("key");if(t&&t.value){var r=n.getRangeFromOffsetAndLength(e.start,e.end-e.start);u.push({label:t.value.getValue(),icon:"function",type:"string",range:r,children:[]})}}}),l.Promise.as(u)}var u=t([],s);return l.Promise.as(u)},t.prototype.textReplace=function(e,t){return p.ReplaceSupport.valueSetReplace(["true","false"],e,t)},t.prototype.format=function(e,t,n){var r=this.resourceService.get(e);return l.TPromise.as(o.format(r,t,n))},t.prototype.navigateValueSetFallback=function(e,t,n){var r=this,o=this.resourceService.get(e),s=o.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn}),a=new i.JSONParser,l=new i.JSONDocumentConfig;l.ignoreDanglingComma=!0;var u=a.parse(o.getValue(),l),p=u.getNodeFromOffsetEndInclusive(s);return!p||"string"!==p.type&&"number"!==p.type&&"boolean"!==p.type&&"null"!==p.type?null:this.schemaService.getSchemaForResource(e.toString(),u).then(function(e){if(e){var t=[],i={},s={add:function(e){i[e.label]||(i[e.label]=!0,t.push(e))},setAsIncomplete:function(){},error:function(e){h.onUnexpectedError(e)}};return r.jsonIntellisense.getValueSuggestions(e,u,p.parent,p.start,s).then(function(){for(var e=o.getRangeFromOffsetAndLength(p.start,p.end-p.start),r=o.getValueInRange(e),i=0,s=t.length;s>i;i++)if(c.equalsIgnoreCase(t[i].label,r)){var a=i;return n?a=(i+1)%s:(a=i-1,0>a&&(a=s-1)),{value:t[a].label,range:e}}return null})}})},t=__decorate([__param(2,b.IResourceService),__param(3,g.IMarkerService),__param(4,y.IRequestService),__param(5,v.IWorkspaceContextService),__param(6,S.IInstantiationService)],t)}(r.AbstractModeWorker);t.JSONWorker=z});