/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
define("vs/languages/html/common/htmlScanner",["require","exports","vs/languages/html/common/htmlTokenTypes"],function(e,n,t){"use strict";function o(e){switch(e){case t.DELIM_START:case t.DELIM_END:case t.DELIM_ASSIGN:return!0}return!1}function l(e){switch(e){case t.DELIM_START:case t.DELIM_END:case t.DELIM_ASSIGN:case t.ATTRIB_NAME:case t.ATTRIB_VALUE:return!0}return t.isTag(e)}function a(e,n){var t=n.column-1,a=n.lineNumber,r=e.getLineTokens(a),i=e.getLineContent(a),s=r.findIndexOfOffset(t),c=r.getTokenCount(),u=r.getTokenType(s),g=r.getTokenStartIndex(s),d=r.getTokenEndIndex(s,i.length);return""!==u&&!o(u)||g!==t||(s--,s>=0?(u=r.getTokenType(s),g=r.getTokenStartIndex(s),d=r.getTokenEndIndex(s,i.length)):(u="",g=d=0)),{getTokenType:function(){return u},isAtTokenEnd:function(){return t===d},isAtTokenStart:function(){return t===g},getTokenContent:function(){return i.substring(g,d)},isOpenBrace:function(){return d>g&&"<"===i.charAt(g)},getTokenPosition:function(){return{lineNumber:a,column:g+1}},getTokenRange:function(){return{startLineNumber:a,startColumn:g+1,endLineNumber:a,endColumn:d+1}},getModel:function(){return e},scanBack:function(){if(0>=a)return!1;s--;do{for(;s>=0;){if(u=r.getTokenType(s),g=r.getTokenStartIndex(s),d=r.getTokenEndIndex(s,i.length),l(u))return!0;s--}a--,a>0&&(r=e.getLineTokens(a),i=e.getLineContent(a),c=r.getTokenCount(),s=c-1)}while(a>0);return r=null,u=i="",g=d=c=0,!1},scanForward:function(){if(a>e.getLineCount())return!1;s++;do{for(;c>s;){if(u=r.getTokenType(s),g=r.getTokenStartIndex(s),d=r.getTokenEndIndex(s,i.length),l(u))return!0;s++}a++,s=0,a<=e.getLineCount()&&(r=e.getLineTokens(a),i=e.getLineContent(a),c=r.getTokenCount())}while(a<=e.getLineCount());return u=i="",g=d=c=0,!1}}}n.getScanner=a}),define("vs/nls!vs/languages/html/common/htmlTags",["vs/nls","vs/nls!vs/languages/html/common/htmlWorker"],function(e,n){return e.create("vs/languages/html/common/htmlTags",n)}),/*---------------------------------------------------------------------------------------------
 *  Copyright © 2015 W3C® (MIT, ERCIM, Keio, Beihang). This software or document includes includes material copied
 *  from or derived from HTML 5.1 W3C Working Draft (http://www.w3.org/TR/2015/WD-html51-20151008/.)"
 *--------------------------------------------------------------------------------------------*/
define("vs/languages/html/common/htmlTags",["require","exports","vs/base/common/strings","vs/nls!vs/languages/html/common/htmlTags"],function(e,n,t,o){"use strict";function l(){var e=["aria-activedescendant","aria-atomic:b","aria-autocomplete:autocomplete","aria-busy:b","aria-checked:tristate","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current:current","aria-describedat","aria-describedby","aria-disabled:b","aria-dropeffect:dropeffect","aria-errormessage","aria-expanded:u","aria-flowto","aria-grabbed:u","aria-haspopup:b","aria-hidden:b","aria-invalid:invalid","aria-kbdshortcuts","aria-label","aria-labelledby","aria-level","aria-live:live","aria-modal:b","aria-multiline:b","aria-multiselectable:b","aria-orientation:orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed:tristate","aria-readonly:b","aria-relevant:relevant","aria-required:b","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected:u","aria-setsize","aria-sort:sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","accesskey","class","contenteditable:b","contextmenu","dir:d","draggable:b","dropzone","hidden:v","id","itemid","itemprop","itemref","itemscope:v","itemtype","lang","role:roles","spellcheck:b","style","tabindex","title","translate:y"],o=["onabort","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformchange","onforminput","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onreadystatechange","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"],l={b:["true","false"],u:["true","false","undefined"],o:["on","off"],y:["yes","no"],w:["soft","hard"],d:["ltr","rtl","auto"],m:["GET","POST","dialog"],fm:["GET","POST"],s:["row","col","rowgroup","colgroup"],t:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],im:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],bt:["button","submit","reset","menu"],lt:["1","a","A","i","I"],mt:["context","toolbar"],mit:["command","checkbox","radio"],et:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],tk:["subtitles","captions","descriptions","chapters","metadata"],pl:["none","metadata","auto"],sh:["circle","default","poly","rect"],xo:["anonymous","use-credentials"],sb:["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-same-origin","allow-scripts","allow-top-navigation"],tristate:["true","false","mixed","undefined"],autocomplete:["inline","list","both","none"],current:["page","step","location","date","time","true","false"],dropeffect:["copy","move","link","execute","popup","none"],invalid:["grammar","false","spelling","true"],live:["off","polite","assertive"],orientation:["vertical","horizontal","undefined"],relevant:["additions","removals","text","all","additions text"],sort:["ascending","descending","none","other"],roles:["alert","alertdialog","button","checkbox","dialog","gridcell","link","log","marquee","menuitem","menuitemcheckbox","menuitemradio","option","progressbar","radio","scrollbar","searchbox","slider","spinbutton","status","switch","tab","tabpanel","textbox","timer","tooltip","treeitem","combobox","grid","listbox","menu","menubar","radiogroup","tablist","tree","treegrid","application","article","cell","columnheader","definition","directory","document","feed","figure","group","heading","img","list","listitem","math","none","note","presentation","region","row","rowgroup","rowheader","separator","table","term","text","toolbar","banner","complementary","contentinfo","form","main","navigation","region","search"]};return{collectTags:function(e){for(var t in n.HTML_TAGS)e(t,n.HTML_TAGS[t].label)},collectAttributes:function(t,l){if(e.forEach(function(e){var n=e.split(":");l(n[0],n[1])}),o.forEach(function(e){l(e,"event")}),t){var a=n.HTML_TAGS[t];if(a){var r=a.attributes;r&&r.forEach(function(e){var n=e.split(":");l(n[0],n[1])})}}},collectValues:function(o,a,r){var i=a+":",s=function(e){e.forEach(function(e){if(e.length>i.length&&t.startsWith(e,i)){var n=e.substr(i.length);if("v"===n)r(a);else{var o=l[n];o&&o.forEach(r)}}})};if(o){var c=n.HTML_TAGS[o];if(c){var u=c.attributes;u&&s(u)}}s(e)}}}function a(){var e={input:["ng-model","ng-required","ng-minlength","ng-maxlength","ng-pattern","ng-trim"],select:["ng-model"],textarea:["ng-model","ng-required","ng-minlength","ng-maxlength","ng-pattern","ng-trim"]},n=["ng-app","ng-bind","ng-bind-html","ng-bind-template","ng-blur","ng-change","ng-checked","ng-class","ng-class-even","ng-class-odd","ng-click","ng-cloak","ng-controller","ng-copy","ng-csp","ng-cut","ng-dblclick","ng-disabled","ng-focus","ng-form","ng-hide","ng-href","ng-if","ng-include","ng-init","ng-jq","ng-keydown","ng-keypress","ng-keyup","ng-list","ng-model-options","ng-mousedown","ng-mouseenter","ng-mouseleave","ng-mousemove","ng-mouseover","ng-mouseup","ng-non-bindable","ng-open","ng-options","ng-paste","ng-pluralize","ng-readonly","ng-repeat","ng-selected","ng-show","ng-src","ng-srcset","ng-style","ng-submit","ng-switch","ng-transclude","ng-value"];return{collectTags:function(e){},collectAttributes:function(t,o){if(t){var l=e[t];l&&l.forEach(function(e){o(e,null),o("data-"+e,null)})}n.forEach(function(e){o(e,null),o("data-"+e,null)})},collectValues:function(e,n,t){}}}var r=function(){function e(e,n){void 0===n&&(n=[]),this.label=e,this.attributes=n}return e}();n.HTMLTagSpecification=r,n.HTML_TAGS={html:new r(o.localize(0,null),["manifest"]),head:new r(o.localize(1,null)),title:new r(o.localize(2,null)),base:new r(o.localize(3,null),["href","target"]),link:new r(o.localize(4,null),["href","crossorigin:xo","rel","media","hreflang","type","sizes"]),meta:new r(o.localize(5,null),["name","http-equiv","content","charset"]),style:new r(o.localize(6,null),["media","nonce","type","scoped:v"]),body:new r(o.localize(7,null),["onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onstorage","onunload"]),article:new r(o.localize(8,null)),section:new r(o.localize(9,null)),nav:new r(o.localize(10,null)),aside:new r(o.localize(11,null)),h1:new r(o.localize(12,null)),h2:new r(o.localize(13,null)),h3:new r(o.localize(14,null)),h4:new r(o.localize(15,null)),h5:new r(o.localize(16,null)),h6:new r(o.localize(17,null)),header:new r(o.localize(18,null)),footer:new r(o.localize(19,null)),address:new r(o.localize(20,null)),p:new r(o.localize(21,null)),hr:new r(o.localize(22,null)),pre:new r(o.localize(23,null)),blockquote:new r(o.localize(24,null),["cite"]),ol:new r(o.localize(25,null),["reversed:v","start","type:lt"]),ul:new r(o.localize(26,null)),li:new r(o.localize(27,null),["value"]),dl:new r(o.localize(28,null)),dt:new r(o.localize(29,null)),dd:new r(o.localize(30,null)),figure:new r(o.localize(31,null)),figcaption:new r(o.localize(32,null)),main:new r(o.localize(33,null)),div:new r(o.localize(34,null)),a:new r(o.localize(35,null),["href","target","download","ping","rel","hreflang","type"]),em:new r(o.localize(36,null)),strong:new r(o.localize(37,null)),small:new r(o.localize(38,null)),s:new r(o.localize(39,null)),cite:new r(o.localize(40,null)),q:new r(o.localize(41,null),["cite"]),dfn:new r(o.localize(42,null)),abbr:new r(o.localize(43,null)),ruby:new r(o.localize(44,null)),rb:new r(o.localize(45,null)),rt:new r(o.localize(46,null)),rp:new r(o.localize(47,null)),time:new r(o.localize(48,null),["datetime"]),code:new r(o.localize(49,null)),"var":new r(o.localize(50,null)),samp:new r(o.localize(51,null)),kbd:new r(o.localize(52,null)),sub:new r(o.localize(53,null)),sup:new r(o.localize(54,null)),i:new r(o.localize(55,null)),b:new r(o.localize(56,null)),u:new r(o.localize(57,null)),mark:new r(o.localize(58,null)),bdi:new r(o.localize(59,null)),bdo:new r(o.localize(60,null)),span:new r(o.localize(61,null)),br:new r(o.localize(62,null)),wbr:new r(o.localize(63,null)),ins:new r(o.localize(64,null)),del:new r(o.localize(65,null),["cite","datetime"]),picture:new r(o.localize(66,null)),img:new r(o.localize(67,null),["alt","src","srcset","crossorigin:xo","usemap","ismap:v","width","height"]),iframe:new r(o.localize(68,null),["src","srcdoc","name","sandbox:sb","seamless:v","allowfullscreen:v","width","height"]),embed:new r(o.localize(69,null),["src","type","width","height"]),object:new r(o.localize(70,null),["data","type","typemustmatch:v","name","usemap","form","width","height"]),param:new r(o.localize(71,null),["name","value"]),video:new r(o.localize(72,null),["src","crossorigin:xo","poster","preload:pl","autoplay:v","mediagroup","loop:v","muted:v","controls:v","width","height"]),audio:new r(o.localize(73,null),["src","crossorigin:xo","preload:pl","autoplay:v","mediagroup","loop:v","muted:v","controls:v"]),source:new r(o.localize(74,null),["src","type"]),track:new r(o.localize(75,null),["default:v","kind:tk","label","src","srclang"]),map:new r(o.localize(76,null),["name"]),area:new r(o.localize(77,null),["alt","coords","shape:sh","href","target","download","ping","rel","hreflang","type"]),table:new r(o.localize(78,null),["sortable:v","border"]),caption:new r(o.localize(79,null)),colgroup:new r(o.localize(80,null),["span"]),col:new r(o.localize(81,null),["span"]),tbody:new r(o.localize(82,null)),thead:new r(o.localize(83,null)),tfoot:new r(o.localize(84,null)),tr:new r(o.localize(85,null)),td:new r(o.localize(86,null),["colspan","rowspan","headers"]),th:new r(o.localize(87,null),["colspan","rowspan","headers","scope:s","sorted","abbr"]),form:new r(o.localize(88,null),["accept-charset","action","autocomplete:o","enctype:et","method:m","name","novalidate:v","target"]),label:new r(o.localize(89,null),["form","for"]),input:new r(o.localize(90,null),["accept","alt","autocomplete:o","autofocus:v","checked:v","dirname","disabled:v","form","formaction","formenctype:et","formmethod:fm","formnovalidate:v","formtarget","height","inputmode:im","list","max","maxlength","min","minlength","multiple:v","name","pattern","placeholder","readonly:v","required:v","size","src","step","type:t","value","width"]),button:new r(o.localize(91,null),["autofocus:v","disabled:v","form","formaction","formenctype:et","formmethod:fm","formnovalidate:v","formtarget","name","type:bt","value"]),select:new r(o.localize(92,null),["autocomplete:o","autofocus:v","disabled:v","form","multiple:v","name","required:v","size"]),datalist:new r(o.localize(93,null)),optgroup:new r(o.localize(94,null),["disabled:v","label"]),option:new r(o.localize(95,null),["disabled:v","label","selected:v","value"]),textarea:new r(o.localize(96,null),["autocomplete:o","autofocus:v","cols","dirname","disabled:v","form","inputmode:im","maxlength","minlength","name","placeholder","readonly:v","required:v","rows","wrap:w"]),output:new r(o.localize(97,null),["for","form","name"]),progress:new r(o.localize(98,null),["value","max"]),meter:new r(o.localize(99,null),["value","min","max","low","high","optimum"]),fieldset:new r(o.localize(100,null),["disabled:v","form","name"]),legend:new r(o.localize(101,null)),details:new r(o.localize(102,null),["open:v"]),summary:new r(o.localize(103,null)),dialog:new r(o.localize(104,null)),script:new r(o.localize(105,null),["src","type","charset","async:v","defer:v","crossorigin:xo","nonce"]),noscript:new r(o.localize(106,null)),template:new r(o.localize(107,null)),canvas:new r(o.localize(108,null),["width","height"])},n.getHTML5TagProvider=l,n.getAngularTagProvider=a});var __decorate=this&&this.__decorate||function(e,n,t,o){var l,a=arguments.length,r=3>a?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,o);else for(var i=e.length-1;i>=0;i--)(l=e[i])&&(r=(3>a?l(r):a>3?l(n,t,r):l(n,t))||r);return a>3&&r&&Object.defineProperty(n,t,r),r},__param=this&&this.__param||function(e,n){return function(t,o){n(t,o,e)}};define("vs/languages/html/common/htmlWorker",["require","exports","vs/base/common/uri","vs/base/common/winjs.base","vs/languages/lib/common/beautify-html","vs/languages/html/common/htmlTags","vs/base/common/network","vs/base/common/strings","vs/editor/common/core/position","vs/platform/workspace/common/workspace","vs/platform/markers/common/markers","vs/editor/common/services/resourceService","vs/languages/html/common/htmlScanner","vs/languages/html/common/htmlTokenTypes","vs/languages/html/common/htmlEmptyTagsShared","vs/editor/common/modes/supports/suggestSupport","vs/base/common/paths"],function(e,n,t,o,l,a,r,i,s,c,u,g,d,p,m,f,h){"use strict";function T(e){return/^\s*$/.test(e)}var v;!function(e){e[e.LOOKING_FOR_HREF_OR_SRC=1]="LOOKING_FOR_HREF_OR_SRC",e[e.AFTER_HREF_OR_SRC=2]="AFTER_HREF_OR_SRC"}(v||(v={}));var w=function(){function e(e,n,t,o,l){this._modeId=e,this.resourceService=t,this.markerService=o,this._contextService=l,this._tagProviders=[],this._tagProviders.push(a.getHTML5TagProvider()),this.addCustomTagProviders(this._tagProviders)}return e.prototype.addCustomTagProviders=function(e){e.push(a.getAngularTagProvider())},e.prototype.format=function(e,n,t){var o=this;return this._delegateToModeAtPosition(e,s.Position.startPosition(n),function(l,a){return l&&a.getMode().formattingSupport?a.getMode().formattingSupport.formatRange(a.getAssociatedResource(),n,t):o.formatHTML(e,n,t)})},e.prototype.formatHTML=function(e,n,t){var a=this.resourceService.get(e),r=n?a.getValueInRange(n):a.getValue(),i=l.html_beautify(r,{indent_size:t.insertSpaces?t.tabSize:1,indent_char:t.insertSpaces?" ":"	",wrap_line_length:120});return o.TPromise.as([{range:n,text:i}])},e.prototype._delegateToModeAtPosition=function(e,n,t){var o=this.resourceService.get(e);if(!o)return null;var l=o.getEmbeddedAtPosition(n);if(!l)return t(!1,o);var a=l.getMode();return t(a.getId()!==this._modeId,l)},e.prototype._delegateToAllModes=function(e,n){var t=this.resourceService.get(e);return t?n(t.getAllEmbedded()):null},e.prototype.computeInfo=function(e,n){return this._delegateToModeAtPosition(e,n,function(e,t){return e&&t.getMode().extraInfoSupport?t.getMode().extraInfoSupport.computeInfo(t.getAssociatedResource(),n):void 0})},e.prototype.findReferences=function(e,n,t){return this._delegateToModeAtPosition(e,n,function(e,o){return e&&o.getMode().referenceSupport?o.getMode().referenceSupport.findReferences(o.getAssociatedResource(),n,t):void 0})},e.prototype.getRangesToPosition=function(e,n){return this._delegateToModeAtPosition(e,n,function(e,t){return e&&t.getMode().logicalSelectionSupport?t.getMode().logicalSelectionSupport.getRangesToPosition(t.getAssociatedResource(),n):void 0})},e.prototype.findDeclaration=function(e,n){return this._delegateToModeAtPosition(e,n,function(e,t){return e&&t.getMode().declarationSupport?t.getMode().declarationSupport.findDeclaration(t.getAssociatedResource(),n):void 0})},e.prototype.findColorDeclarations=function(e){return this._delegateToAllModes(e,function(e){var n=[];return n=e.filter(function(e){return"function"==typeof e.getMode().findColorDeclarations}).map(function(e){return e.getMode().findColorDeclarations(e.getAssociatedResource())}),o.TPromise.join(n).then(function(e){var n=[];return e.forEach(function(e){return n=n.concat(e)}),n})})},e.prototype.getParameterHints=function(e,n){return this._delegateToModeAtPosition(e,n,function(e,t){return e&&t.getMode().parameterHintsSupport?t.getMode().parameterHintsSupport.getParameterHints(t.getAssociatedResource(),n):void 0})},e.prototype.findMatchingOpenTag=function(e){for(var n={},t=!1;e.scanBack();)if(p.isTag(e.getTokenType())&&!t){var o=e.getTokenContent();if(e.scanBack(),e.getTokenType()===p.DELIM_END)n[o]=(n[o]||0)+1;else if(!m.isEmptyElement(o)){if(!n[o])return o;n[o]--}}else e.getTokenType()===p.DELIM_START&&(t="/>"===e.getTokenContent());return null},e.prototype.collectTagSuggestions=function(e,n,t){var o=this,l=e.getModel(),a=l.getLineContent(n.lineNumber).substr(n.column-1),r=T(a)||i.startsWith(a,"<")?">":"",s=function(a,i){var s=e.getTokenPosition(),c=o.findMatchingOpenTag(e);if(c){var u={label:"/"+c,codeSnippet:"/"+c+r,overwriteBefore:i,type:"property"};if(t.suggestions.push(u),a){var g=e.getTokenPosition();if(s.lineNumber!==g.lineNumber){var d=l.getLineContent(g.lineNumber).substring(0,g.column-1),p=l.getLineContent(s.lineNumber).substring(0,s.column-1);T(d)&&T(p)&&(u.overwriteBefore=n.column-1,u.codeSnippet=d+"</"+c+r)}}return!0}return!1};if(e.getTokenType()===p.DELIM_END){var c=s(!0,t.currentWord.length+1);c||this._tagProviders.forEach(function(e){e.collectTags(function(e,n){t.suggestions.push({label:"/"+e,overwriteBefore:t.currentWord.length+1,codeSnippet:"/"+e+r,type:"property",documentationLabel:n})})})}else s(!1,t.currentWord.length),this._tagProviders.forEach(function(e){e.collectTags(function(e,n){t.suggestions.push({label:e,codeSnippet:e,type:"property",documentationLabel:n})})})},e.prototype.collectContentSuggestions=function(e){},e.prototype.collectAttributeSuggestions=function(e,n){var t=null;do{if(p.isTag(e.getTokenType())){t=e.getTokenContent();break}if(e.getTokenType()===p.DELIM_START)break}while(e.scanBack());this._tagProviders.forEach(function(e){e.collectAttributes(t,function(e,t){var o=e;"v"!==t&&(o+='="{{}}"'),n.suggestions.push({label:e,codeSnippet:o,type:"handler"===t?"function":"value"})})})},e.prototype.collectAttributeValueSuggestions=function(e,n){for(var t=e.getTokenType()===p.DELIM_ASSIGN,o=null,l=null;e.scanBack();)if(e.getTokenType()===p.ATTRIB_NAME){o=e.getTokenContent();break}for(;e.scanBack();){if(p.isTag(e.getTokenType())){l=e.getTokenContent();break}if(e.getTokenType()===p.DELIM_START)return}this._tagProviders.forEach(function(e){e.collectValues(l,o,function(e){n.suggestions.push({label:e,codeSnippet:t?'"'+e+'"':e,type:"unit"})})})},e.prototype.suggest=function(e,n,t){var o=this;return this._delegateToModeAtPosition(e,n,function(l,a){return l&&a.getMode().suggestSupport?a.getMode().suggestSupport.suggest(a.getAssociatedResource(),n,t):o.suggestHTML(e,n)})},e.prototype.suggestHTML=function(e,n){return this.doSuggest(e,n).then(function(e){return f.filterSuggestions(e)})},e.prototype.doSuggest=function(e,n){var t=this.resourceService.get(e),l=t.getWordUntilPosition(n).word,a={currentWord:l,suggestions:[]},r=d.getScanner(t,n);switch(r.getTokenType()){case p.DELIM_START:case p.DELIM_END:r.isOpenBrace()?this.collectTagSuggestions(r,n,a):this.collectContentSuggestions(a);break;case p.ATTRIB_NAME:this.collectAttributeSuggestions(r,a);break;case p.ATTRIB_VALUE:this.collectAttributeValueSuggestions(r,a);break;case p.DELIM_ASSIGN:r.isAtTokenEnd()&&this.collectAttributeValueSuggestions(r,a);break;case"":if(T(r.getTokenContent())&&r.scanBack())switch(r.getTokenType()){case p.ATTRIB_VALUE:case p.ATTRIB_NAME:this.collectAttributeSuggestions(r,a);break;case p.DELIM_ASSIGN:this.collectAttributeValueSuggestions(r,a);break;case p.DELIM_START:case p.DELIM_END:r.isOpenBrace()?this.collectTagSuggestions(r,n,a):this.collectContentSuggestions(a);break;default:p.isTag(r.getTokenType())&&this.collectAttributeSuggestions(r,a)}else this.collectContentSuggestions(a);break;default:p.isTag(r.getTokenType())&&(r.scanBack(),this.collectTagSuggestions(r,n,a))}return o.TPromise.as(a)},e.prototype.findMatchingBracket=function(e,n){if(m.isEmptyElement(e))return null;var t=0;if(n.scanBack(),n.getTokenType()===p.DELIM_END)for(var o=!1;n.scanBack();)if(p.isTag(n.getTokenType())&&n.getTokenContent()===e&&!o){var l=n.getTokenRange();if(n.scanBack(),n.getTokenType()===p.DELIM_START){if(0===t)return l;t--}else t++}else n.getTokenType()===p.DELIM_START&&(o="/>"===n.getTokenContent());else for(var a=!1;n.scanForward();)if(p.isTag(n.getTokenType())&&n.getTokenContent()===e)if(a){if(t--,0>=t)return n.getTokenRange()}else if(n.scanForward(),n.getTokenType()===p.DELIM_START&&"/>"===n.getTokenContent()){if(0>=t)return null}else t++;else n.getTokenType()===p.DELIM_START?a=!1:n.getTokenType()===p.DELIM_END&&(a=!0);return null},e.prototype.findOccurrences=function(e,n,t){var o=this;return void 0===t&&(t=!1),this._delegateToModeAtPosition(e,n,function(l,a){return l&&a.getMode().occurrencesSupport?a.getMode().occurrencesSupport.findOccurrences(a.getAssociatedResource(),n,t):o.findOccurrencesHTML(e,n,t)})},e.prototype.findOccurrencesHTML=function(e,n,t){var l=this.resourceService.get(e),a=l.getWordAtPosition(n),r=a?a.word:"",i=[],s=d.getScanner(l,n);if(p.isTag(s.getTokenType())){var c=s.getTokenContent();i.push({range:s.getTokenRange()});var u=this.findMatchingBracket(c,s);u&&i.push({range:u})}else for(var g=l.getAllWordsWithRange(),m=Math.min(1e3,g.length),f=0;m>f;f++)g[f].text===r&&i.push({range:g[f].range});return o.TPromise.as(i)},e._stripQuotes=function(e){return e.replace(/^'([^']+)'$/,function(e,n){return n}).replace(/^"([^"]+)"$/,function(e,n){return n})},e._getWorkspaceUrl=function(n,t,o){if(o=e._stripQuotes(o),/^\s*javascript\:/i.test(o)||/^\s*\#/i.test(o))return null;if(/^\s*https?:\/\//i.test(o)||/^\s*file:\/\//i.test(o))return o.replace(/^\s*/g,"");if(/^\s*\/\//i.test(o)){var l=r.Schemas.http;return n.scheme===r.Schemas.https&&(l=r.Schemas.https),l+":"+o.replace(/^\s*/g,"")}var a=h.dirname(n.path),s=null;o.length>0&&"/"===o.charAt(0)?s=o:(s=h.join(a,o),s=s.replace(/^(\/\.\.)+/,""));var c=n.withPath(s).toString(),u=t?t.toString():null;if(u&&i.startsWith(n.toString(),u)){var g=i.commonPrefixLength(u,c);return i.endsWith(u,"/")&&(g=c.lastIndexOf("/",g)+1),u+c.substr(g)}return c},e.prototype.createLink=function(n,t,o,l,a,r){var i=e._getWorkspaceUrl(n,t,o);return i?{range:{startLineNumber:l,startColumn:a,endLineNumber:l,endColumn:r},url:i}:null},e.prototype._computeHTMLLinks=function(e){var n,o,l,a,r,i,s,c,u,g,d=e.getLineCount(),m=[],f=v.LOOKING_FOR_HREF_OR_SRC,h=e.getAssociatedResource(),T=null,w=this._contextService.getWorkspace();if(w){var b=String(w.resource);T="/"===b.charAt(b.length-1)?t["default"].parse(b):t["default"].parse(b+"/")}for(n=1;d>=n;n++)for(o=e.getLineContent(n),l=o.length,a=e.getLineTokens(n),s=0,i=a.getTokenCount();i>s;s++)switch(r=a.getTokenType(s)){case p.DELIM_ASSIGN:case"":break;case p.ATTRIB_NAME:c=a.getTokenEndIndex(s,l),u=o.substring(a.getTokenStartIndex(s),c).toLowerCase(),f="src"===u||"href"===u?v.AFTER_HREF_OR_SRC:v.LOOKING_FOR_HREF_OR_SRC;break;case p.ATTRIB_VALUE:f===v.AFTER_HREF_OR_SRC&&(c=a.getTokenEndIndex(s,l),u=o.substring(a.getTokenStartIndex(s),c),g=this.createLink(h,T,u,n,a.getTokenStartIndex(s)+2,c),g&&m.push(g),f=v.LOOKING_FOR_HREF_OR_SRC);default:p.isTag(r)?f=v.LOOKING_FOR_HREF_OR_SRC:f===v.AFTER_HREF_OR_SRC&&(f=v.LOOKING_FOR_HREF_OR_SRC)}return m},e.prototype.computeLinks=function(e){var n=this.resourceService.get(e);return o.TPromise.as(this._computeHTMLLinks(n))},e=__decorate([__param(2,g.IResourceService),__param(3,u.IMarkerService),__param(4,c.IWorkspaceContextService)],e)}();n.HTMLWorker=w});
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/f291f4ad600767626b24a4b15816b04bee9a3049/vs\languages\html\common\htmlWorker.js.map
